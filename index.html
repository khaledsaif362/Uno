<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>UNO Simple Game</title>
  <style>
    body {
      background: #39c7fa;
      font-family: sans-serif;
      text-align: center;
    }
    #game {
      margin: 20px auto;
      padding: 16px;
      background: #fff272;
      width: 560px;
      border-radius: 20px;
      box-shadow: 0px 8px 32px #2075aa99;
    }
    #player-hand, #opponent-hand {
      display: flex;
      justify-content: center;
      margin: 12px 0;
      min-height: 80px;
    }
    .card {
      width: 44px;
      height: 64px;
      margin: 0 4px;
      border: 2px solid #333;
      border-radius: 8px;
      background: white;
      font-size: 2em;
      line-height: 64px;
      text-align: center;
      box-shadow: 2px 2px 8px #0003;
      cursor: pointer;
      transition: transform 0.1s;
      user-select: none;
    }
    .card.red { background: #eb2227; color: #fff; }
    .card.green { background: #2eb635; color: #fff; }
    .card.blue { background: #1688da; color: #fff; }
    .card.yellow { background: #f8cf48; color: #444; }
    .card.wild { background: linear-gradient(135deg, #ff3232, #32ff32, #32cfff, #fff232); color: #111; font-size: 1em; }
    .back { background: #111; color: #111; }
    #discard-pile {
      margin: 20px;
      text-align: center;
    }
    #draw-card {
      padding: 12px 20px;
      font-size: 18px;
      background: #fff;
      border-radius: 12px;
      border: 2px solid #333;
      cursor: pointer;
      margin-top: 16px;
    }
    #message {
      margin: 12px 0;
      min-height: 32px;
      font-weight: bold;
      color: #282d35;
    }
  </style>
</head>
<body>
  <h1>UNO Game</h1>
  <div id="game">
    <div><strong>Bot</strong></div>
    <div id="opponent-hand"></div>
    <div id="discard-pile"></div>
    <div><strong>You</strong></div>
    <div id="player-hand"></div>
    <button id="draw-card">Draw Card</button>
    <div id="message"></div>
  </div>
  <script>
    const colors = ['red', 'green', 'yellow', 'blue'];
    const values = ['0','1','2','3','4','5','6','7','8','9','skip','reverse','draw2'];

    function makeDeck() {
      let deck = [];
      for (let color of colors) {
        for (let value of values) {
          deck.push({ color, value });
          if (value !== '0') deck.push({ color, value });
        }
      }
      // Add wilds
      for (let i = 0; i < 4; i++) deck.push({ color: 'wild', value: 'wild' });
      for (let i = 0; i < 4; i++) deck.push({ color: 'wild', value: 'draw4' });
      return deck.sort(() => Math.random() - 0.5);
    }

    let deck, playerHand, opponentHand, discardPile, currentColor, currentValue, playerTurn;

    function drawCard(hand, n = 1) {
      for (let i = 0; i < n; i++) {
        if (deck.length === 0) {
          deck = discardPile.splice(0, discardPile.length - 1).sort(() => Math.random() - 0.5);
        }
        if (deck.length > 0) hand.push(deck.pop());
      }
    }

    function startGame() {
      deck = makeDeck();
      playerHand = [];
      opponentHand = [];
      discardPile = [];
      drawCard(playerHand, 7);
      drawCard(opponentHand, 7);
      let first = deck.pop();
      while (first.color === 'wild') deck.unshift(first), first = deck.pop();
      discardPile.push(first);
      currentColor = first.color;
      currentValue = first.value;
      playerTurn = true;
      render();
      document.getElementById('message').textContent = "Your turn";
    }

    function playable(card) {
      return (
        card.color === currentColor ||
        card.value === currentValue ||
        card.color === 'wild'
      );
    }

    function playCard(hand, idx) {
      const card = hand[idx];
      if (!playable(card)) return;
      hand.splice(idx, 1);
      discardPile.push(card);

      // Select color for wild if needed
      if (card.color === 'wild') {
        let color = prompt("Choose color: red, green, yellow, blue", "red");
        if (!colors.includes(color)) color = colors[Math.floor(Math.random() * 4)];
        currentColor = color;
      } else {
        currentColor = card.color;
      }
      currentValue = card.value;

      if (card.value === 'draw2') {
        drawCard(playerTurn ? opponentHand : playerHand, 2);
      }
      if (card.value === 'draw4') {
        drawCard(playerTurn ? opponentHand : playerHand, 4);
      }
      if (card.value === 'skip' || card.value === 'reverse') {
        // Skip turn
        playerTurn = playerTurn;
        render();
        if (checkWin()) return;
        document.getElementById('message').textContent = playerTurn ? "Your turn (Bot skipped)" : "Bot's turn (You skipped)";
        if (!playerTurn) setTimeout(botMove, 900);
        return;
      }
      playerTurn = !playerTurn;
      render();
      if (!playerTurn) {
        document.getElementById('message').textContent = "Bot's turn...";
        setTimeout(botMove, 1200);
      }
    }

    function render() {
      // Opponent
      const oh = document.getElementById('opponent-hand');
      oh.innerHTML = '';
      for (let i = 0; i < opponentHand.length; ++i)
        oh.innerHTML += `<div class="card back"></div>`;
      // Discard
      const dp = discardPile[discardPile.length - 1];
      let discardText = dp.value === 'draw2' ? '+2'
                      : dp.value === 'draw4' ? '+4'
                      : dp.value.toUpperCase();
      document.getElementById('discard-pile').innerHTML =
        `<div class="card ${dp.color}">${discardText}</div>`;
      // Player
      const ph = document.getElementById('player-hand');
      ph.innerHTML = '';
      playerHand.forEach((c, i) => {
        let text = c.value === 'draw2' ? '+2'
                 : c.value === 'draw4' ? '+4'
                 : c.value.toUpperCase();
        ph.innerHTML += `<div class="card ${c.color}" onclick="handClick(${i})">${text}</div>`;
      });
    }

    window.handClick = function(idx) {
      if (!playerTurn) return;
      if (!playable(playerHand[idx])) {
        document.getElementById('message').textContent = "Can't play that card!";
        return;
      }
      playCard(playerHand, idx);
      if (checkWin()) return;
      if (!playerTurn) document.getElementById('message').textContent = "Bot's turn...";
    };

    document.getElementById('draw-card').onclick = function() {
      if (!playerTurn) return;
      drawCard(playerHand, 1);
      playerTurn = false;
      render();
      setTimeout(botMove, 900);
    };

    function botMove() {
      if (playerTurn) return;
      // Play first matching card
      for (let i = 0; i < opponentHand.length; ++i) {
        if (playable(opponentHand[i])) {
          playCard(opponentHand, i);
          if (checkWin()) return;
          playerTurn = true;
          render();
          document.getElementById('message').textContent = "Your turn";
          return;
        }
      }
      // Else, draw
      drawCard(opponentHand, 1);
      playerTurn = true;
      render();
      document.getElementById('message').textContent = "Your turn (Bot drew a card)";
    }

    function checkWin() {
      if (playerHand.length === 0) {
        document.getElementById('message').textContent = "You Win!";
        setTimeout(startGame, 2500);
        return true;
      }
      if (opponentHand.length === 0) {
        document.getElementById('message').textContent = "Bot Wins!";
        setTimeout(startGame, 2500);
        return true;
      }
      return false;
    }

    startGame();
  </script>
</body>
</html>
